2025-09-23 01:06:55,658 - INFO - HTTP Request: POST https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/user/login "HTTP/1.1 201 CREATED"
2025-09-23 01:06:55,660 - INFO - Successfully authenticated with Apstra
2025-09-23 01:06:56,792 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints "HTTP/1.1 200 OK"
2025-09-23 01:06:56,794 - INFO - Found blueprint 'hpe-blueprint' with ID: 91de3df7-4ac4-44e6-8374-3fca09126704
2025-09-23 01:06:56,795 - INFO - Starting server OS upgrade for: hpe_evpn_esi_rack_001_sys001
2025-09-23 01:06:56,795 - INFO - OS VLAN: 300, Business VLAN: 400
2025-09-23 01:06:56,795 - INFO - Discovering server configuration for: hpe_evpn_esi_rack_001_sys001
2025-09-23 01:06:57,840 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/experience/web/system-info "HTTP/1.1 200 OK"
2025-09-23 01:06:57,844 - INFO - Found server: hpe_evpn_esi_rack_001_sys001 (ID: qYvv5uQ2w8pizAotCw)
2025-09-23 01:06:58,889 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/experience/web/cabling-map "HTTP/1.1 200 OK"
2025-09-23 01:06:58,892 - INFO - Found 2 LAG connections with 2 interfaces
2025-09-23 01:06:58,893 - INFO - Discovering VLAN policies for OS VLAN 300 and Business VLAN 400
2025-09-23 01:06:59,936 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/obj-policy-export "HTTP/1.1 200 OK"
2025-09-23 01:06:59,939 - ERROR - Upgrade process failed: 'list' object has no attribute 'get'
2025-09-23 01:06:59,939 - ERROR - Script failed: 'list' object has no attribute 'get'
2025-09-23 01:11:25,262 - INFO - HTTP Request: POST https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/user/login "HTTP/1.1 201 CREATED"
2025-09-23 01:11:25,263 - INFO - Successfully authenticated with Apstra
2025-09-23 01:11:26,265 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints "HTTP/1.1 200 OK"
2025-09-23 01:11:26,268 - INFO - Found blueprint 'hpe-blueprint' with ID: 91de3df7-4ac4-44e6-8374-3fca09126704
2025-09-23 01:11:26,268 - INFO - === DRY RUN MODE ===
2025-09-23 01:11:26,268 - INFO - Discovering server configuration for: hpe_evpn_esi_rack_001_sys001
2025-09-23 01:11:27,315 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/experience/web/system-info "HTTP/1.1 200 OK"
2025-09-23 01:11:27,317 - INFO - Found server: hpe_evpn_esi_rack_001_sys001 (ID: qYvv5uQ2w8pizAotCw)
2025-09-23 01:11:28,278 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/experience/web/cabling-map "HTTP/1.1 200 OK"
2025-09-23 01:11:28,364 - INFO - Found 2 LAG connections with 2 interfaces
2025-09-23 01:11:28,364 - INFO - Server Configuration:
2025-09-23 01:11:28,364 - INFO -   Name: hpe_evpn_esi_rack_001_sys001
2025-09-23 01:11:28,364 - INFO -   ID: qYvv5uQ2w8pizAotCw
2025-09-23 01:11:28,364 - INFO -   LAG Connections: 2
2025-09-23 01:11:28,364 - INFO -   Interface IDs: ['AptCGY99td1TXBvqng', 'Faap40tduyOgGiNRXg']
2025-09-23 01:11:28,364 - INFO - Discovering VLAN policies for OS VLAN 300 and Business VLAN 400
2025-09-23 01:11:29,411 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/obj-policy-export "HTTP/1.1 200 OK"
2025-09-23 01:11:29,412 - INFO - Connectivity templates response type: <class 'dict'>
2025-09-23 01:11:29,412 - INFO - Parsed CT data type: <class 'dict'>
2025-09-23 01:11:29,412 - INFO - CT data keys count: 1
2025-09-23 01:11:30,459 - INFO - HTTP Request: POST https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/obj-policy-application-points "HTTP/1.1 201 CREATED"
2025-09-23 01:11:30,461 - INFO - Application endpoints response type: <class 'dict'>
2025-09-23 01:11:30,462 - INFO - Application endpoints response keys: ['application_points', 'node_types']
2025-09-23 01:11:30,462 - WARNING - Could not automatically discover OS VLAN 300 policy
2025-09-23 01:11:30,462 - WARNING - Could not automatically discover Business VLAN 400 policy
2025-09-23 01:11:30,462 - WARNING - Could not automatically discover server application point
2025-09-23 01:11:30,462 - INFO -   OS Policy ID: None
2025-09-23 01:11:30,463 - INFO -   Business Policy ID: None
2025-09-23 01:11:30,463 - INFO -   Application Point ID: None
2025-09-23 01:11:30,463 - INFO - Script completed successfully!
2025-09-23 01:14:29,349 - INFO - HTTP Request: POST https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/user/login "HTTP/1.1 201 CREATED"
2025-09-23 01:14:29,351 - INFO - Successfully authenticated with Apstra
2025-09-23 01:14:30,260 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints "HTTP/1.1 200 OK"
2025-09-23 01:14:30,263 - INFO - Found blueprint 'hpe-blueprint' with ID: 91de3df7-4ac4-44e6-8374-3fca09126704
2025-09-23 01:14:30,263 - INFO - === DRY RUN MODE ===
2025-09-23 01:14:30,263 - INFO - Discovering server configuration for: hpe_evpn_esi_rack_001_sys001
2025-09-23 01:14:31,251 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/experience/web/system-info "HTTP/1.1 200 OK"
2025-09-23 01:14:31,254 - INFO - Found server: hpe_evpn_esi_rack_001_sys001 (ID: qYvv5uQ2w8pizAotCw)
2025-09-23 01:14:32,161 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/experience/web/cabling-map "HTTP/1.1 200 OK"
2025-09-23 01:14:32,161 - INFO - Found 2 LAG connections with 2 interfaces
2025-09-23 01:14:32,161 - INFO - Server Configuration:
2025-09-23 01:14:32,161 - INFO -   Name: hpe_evpn_esi_rack_001_sys001
2025-09-23 01:14:32,161 - INFO -   ID: qYvv5uQ2w8pizAotCw
2025-09-23 01:14:32,162 - INFO -   LAG Connections: 2
2025-09-23 01:14:32,162 - INFO -   Interface IDs: ['AptCGY99td1TXBvqng', 'Faap40tduyOgGiNRXg']
2025-09-23 01:14:32,162 - INFO - Discovering VLAN policies for OS VLAN 300 and Business VLAN 400
2025-09-23 01:14:33,152 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/obj-policy-export "HTTP/1.1 200 OK"
2025-09-23 01:14:33,153 - INFO - Connectivity templates response type: <class 'dict'>
2025-09-23 01:14:33,154 - INFO - Parsed CT data type: <class 'dict'>
2025-09-23 01:14:33,154 - INFO - CT data keys count: 1
2025-09-23 01:14:34,150 - INFO - HTTP Request: POST https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/obj-policy-application-points "HTTP/1.1 201 CREATED"
2025-09-23 01:14:34,158 - INFO - Application endpoints response type: <class 'dict'>
2025-09-23 01:14:34,159 - INFO - Application endpoints response keys: ['application_points', 'node_types']
2025-09-23 01:14:34,159 - WARNING - Could not automatically discover OS VLAN 300 policy
2025-09-23 01:14:34,159 - WARNING - Could not automatically discover Business VLAN 400 policy
2025-09-23 01:14:34,159 - WARNING - Could not automatically discover server application point
2025-09-23 01:14:34,159 - INFO -   OS Policy ID: None
2025-09-23 01:14:34,159 - INFO -   Business Policy ID: None
2025-09-23 01:14:34,159 - INFO -   Application Point ID: None
2025-09-23 01:14:34,159 - INFO - Script completed successfully!
2025-09-23 01:16:58,786 - INFO - HTTP Request: POST https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/user/login "HTTP/1.1 201 CREATED"
2025-09-23 01:16:58,788 - INFO - Successfully authenticated with Apstra
2025-09-23 01:16:59,766 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints "HTTP/1.1 200 OK"
2025-09-23 01:16:59,769 - INFO - Found blueprint 'hpe-blueprint' with ID: 91de3df7-4ac4-44e6-8374-3fca09126704
2025-09-23 01:16:59,769 - INFO - Starting server OS upgrade for: hpe_evpn_esi_rack_001_sys001
2025-09-23 01:16:59,769 - INFO - OS VLAN: 300, Business VLAN: 400
2025-09-23 01:16:59,769 - INFO - Discovering server configuration for: hpe_evpn_esi_rack_001_sys001
2025-09-23 01:17:00,742 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/experience/web/system-info "HTTP/1.1 200 OK"
2025-09-23 01:17:00,745 - INFO - Found server: hpe_evpn_esi_rack_001_sys001 (ID: qYvv5uQ2w8pizAotCw)
2025-09-23 01:17:01,713 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/experience/web/cabling-map "HTTP/1.1 200 OK"
2025-09-23 01:17:01,715 - INFO - Found 2 LAG connections with 2 interfaces
2025-09-23 01:17:01,715 - INFO - Discovering VLAN policies for OS VLAN 300 and Business VLAN 400
2025-09-23 01:17:02,714 - INFO - HTTP Request: GET https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/obj-policy-export "HTTP/1.1 200 OK"
2025-09-23 01:17:02,723 - INFO - Connectivity templates response type: <class 'dict'>
2025-09-23 01:17:02,723 - INFO - Parsed CT data type: <class 'dict'>
2025-09-23 01:17:02,723 - INFO - CT data keys count: 1
2025-09-23 01:17:03,668 - INFO - HTTP Request: POST https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/obj-policy-application-points "HTTP/1.1 201 CREATED"
2025-09-23 01:17:03,686 - INFO - Application endpoints response type: <class 'dict'>
2025-09-23 01:17:03,687 - INFO - Application endpoints response keys: ['application_points', 'node_types']
2025-09-23 01:17:03,687 - WARNING - Could not automatically discover OS VLAN 300 policy
2025-09-23 01:17:03,687 - WARNING - Could not automatically discover Business VLAN 400 policy
2025-09-23 01:17:03,687 - WARNING - Could not automatically discover server application point
2025-09-23 01:17:03,688 - INFO - === Starting Pre-Upgrade Phase ===
2025-09-23 01:17:03,688 - INFO - Step 1: Converting LACP active LAGs to static LAGs
2025-09-23 01:17:05,474 - INFO - HTTP Request: PATCH https://apstra-920bfdb9-2c0b-42e8-bdf2-4e184ebf12d6.aws.apstra.com/api/blueprints/91de3df7-4ac4-44e6-8374-3fca09126704/leaf-server-link-labels "HTTP/1.1 204 NO CONTENT"
2025-09-23 01:17:05,475 - INFO - Successfully changed LAG mode to static_lag for 2 links
2025-09-23 01:17:05,475 - ERROR - Failed to change LAG mode to static_lag: Expecting value: line 1 column 1 (char 0)
2025-09-23 01:17:05,475 - ERROR - Pre-upgrade phase failed: Expecting value: line 1 column 1 (char 0)
2025-09-23 01:17:05,476 - ERROR - Upgrade process failed: Expecting value: line 1 column 1 (char 0)
2025-09-23 01:17:05,476 - ERROR - Script failed: Expecting value: line 1 column 1 (char 0)
