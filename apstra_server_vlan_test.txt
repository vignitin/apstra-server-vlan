(base) nitinvig@nitinvig-mbp server_os_upgrade % python server_os_upgrade.py -s 'hpe_evpn_esi_rack_001_sys001' -rz 'blue' -os 'blue_vn_300'

============================================================
üîç INITIALIZING SERVER OS UPGRADE
============================================================
‚ÑπÔ∏è  Server: hpe_evpn_esi_rack_001_sys001
‚ÑπÔ∏è  Routing Zone: blue
‚ÑπÔ∏è  OS Virtual Network: blue_vn_300
‚ÑπÔ∏è  Discovering server configuration...
‚úÖ Found server 'hpe_evpn_esi_rack_001_sys001' with 2 LAG connections
‚ÑπÔ∏è  Discovering network policies and application points...
‚úÖ Found OS policy: Tagged VxLAN 'blue_vn_300' (ID: 766c9482-99fd-4a6c-ad8b-1688fbd9102c)
‚úÖ Found application point: ae1 -> hpe_evpn_esi_rack_001_sys001 (ID: xVZXowwsRXVswg29xQ)

============================================================
üöÄ STARTING PRE-UPGRADE PHASE
============================================================

üîß Step 1: Selecting and disabling interfaces for redundancy during upgrade
‚ÑπÔ∏è  Available interface connections:
    1. eth1 <-> hpe_evpn_esi_rack_001_leaf2:ge-0/0/2
    2. eth0 <-> hpe_evpn_esi_rack_001_leaf1:ge-0/0/2
‚ÑπÔ∏è  Select which interface(s) to disable during OS upgrade (for redundancy):
‚ÑπÔ∏è  Enter interface numbers separated by commas (e.g., 2,4) or 'default' for automatic selection:
   Interface selection: 2

‚ö†Ô∏è  About to: Disable selected interfaces
   Details: Will disable the following connection(s) for redundancy during OS upgrade:\n    eth0 <-> hpe_evpn_esi_rack_001_leaf1:ge-0/0/2
   Do you want to proceed? (y/n): y
‚úÖ Successfully disabled 1 interface connection(s)

üîß Step 2: Converting LACP active LAGs to static LAGs
‚ÑπÔ∏è  LAG links to be converted:
      1. eth1 <-> hpe_evpn_esi_rack_001_leaf2:ge-0/0/2 (Link ID: hpe_evpn_esi_rack_001_leaf2<->hpe_evpn_esi_rack_001_sys001(dual-link)[1])
      2. eth0 <-> hpe_evpn_esi_rack_001_leaf1:ge-0/0/2 (Link ID: hpe_evpn_esi_rack_001_leaf1<->hpe_evpn_esi_rack_001_sys001(dual-link)[1])

‚ö†Ô∏è  About to: Convert LACP LAGs to static LAGs
   Details: Will change 2 LAG connections from LACP active to static mode for server 'hpe_evpn_esi_rack_001_sys001'
   Do you want to proceed? (y/n): y
‚úÖ Successfully converted 2 LAG connections to static mode

üîß Step 3: Assigning server to OS virtual network 'blue_vn_300'
‚ÑπÔ∏è  Application endpoint interface:
      Interface: ae1 -> hpe_evpn_esi_rack_001_sys001

‚ö†Ô∏è  About to: Assign OS virtual network
   Details: Will assign server 'hpe_evpn_esi_rack_001_sys001' to OS upgrade virtual network 'blue_vn_300' for maintenance
   Do you want to proceed? (y/n): y
‚úÖ Successfully assigned server to OS virtual network 'blue_vn_300'

üîß Step 4: Deploying pre-upgrade configuration to network devices

‚ö†Ô∏è  About to: Deploy configuration changes
   Details: Will deploy all interface, LAG and virtual network configuration changes for server 'hpe_evpn_esi_rack_001_sys001' to the network infrastructure
   Do you want to proceed? (y/n): y
‚úÖ Successfully deployed pre-upgrade configuration

============================================================
‚úÖ PRE-UPGRADE PHASE COMPLETED SUCCESSFULLY
============================================================
‚ÑπÔ∏è  Server is now ready for OS upgrade
‚ÑπÔ∏è  Run the script again with --post-upgrade flag after OS upgrade is complete
‚úÖ Script completed successfully!
(base) nitinvig@nitinvig-mbp server_os_upgrade %
(base) nitinvig@nitinvig-mbp server_os_upgrade %
(base) nitinvig@nitinvig-mbp server_os_upgrade %
(base) nitinvig@nitinvig-mbp server_os_upgrade %
(base) nitinvig@nitinvig-mbp server_os_upgrade %
(base) nitinvig@nitinvig-mbp server_os_upgrade %
(base) nitinvig@nitinvig-mbp server_os_upgrade % python server_os_upgrade.py -s 'hpe_evpn_esi_rack_001_sys001' -rz 'blue' -os 'blue_vn_300' -bvn 'blue_vn_400' --post-upgrade
‚ÑπÔ∏è  Running POST-UPGRADE phase only

============================================================
üîÑ STARTING POST-UPGRADE PHASE
============================================================

üîß Step 1: Re-enabling previously disabled interfaces
‚ÑπÔ∏è  Previously disabled interface connections:
    ‚Ä¢ eth0 <-> hpe_evpn_esi_rack_001_leaf1:ge-0/0/2

‚ö†Ô∏è  About to: Re-enable disabled interfaces
   Details: Will re-enable the above connection(s) to restore full redundancy
   Do you want to proceed? (y/n): y
‚úÖ Successfully re-enabled 1 interface connection(s)

üîß Step 2: Converting static LAGs back to LACP active
‚ÑπÔ∏è  LAG links to be converted:
      1. eth1 <-> hpe_evpn_esi_rack_001_leaf2:ge-0/0/2 (Link ID: hpe_evpn_esi_rack_001_leaf2<->hpe_evpn_esi_rack_001_sys001(dual-link)[1])
      2. eth0 <-> hpe_evpn_esi_rack_001_leaf1:ge-0/0/2 (Link ID: hpe_evpn_esi_rack_001_leaf1<->hpe_evpn_esi_rack_001_sys001(dual-link)[1])

‚ö†Ô∏è  About to: Convert static LAGs back to LACP
   Details: Will convert 2 LAG connections on server 'hpe_evpn_esi_rack_001_sys001' back to LACP active mode
   Do you want to proceed? (y/n): y
‚úÖ Successfully converted 2 LAG connections to LACP active

üîß Step 3: Removing OS virtual network assignment
‚ÑπÔ∏è  Application endpoint interface:
      Interface: ae1 -> hpe_evpn_esi_rack_001_sys001

‚ö†Ô∏è  About to: Remove OS virtual network assignment
   Details: Will remove server 'hpe_evpn_esi_rack_001_sys001' from OS upgrade network (maintenance mode)
   Do you want to proceed? (y/n): y
‚úÖ Successfully removed OS virtual network 'blue_vn_300' assignment

üîß Step 4: Assigning server to business virtual network 'blue_vn_400'
‚ÑπÔ∏è  Application endpoint interface:
      Interface: ae1 -> hpe_evpn_esi_rack_001_sys001

‚ö†Ô∏è  About to: Assign business virtual network
   Details: Will assign server 'hpe_evpn_esi_rack_001_sys001' to production business virtual network 'blue_vn_400'
   Do you want to proceed? (y/n): y
‚úÖ Successfully assigned server to business virtual network 'blue_vn_400'

üîß Step 5: Deploying final post-upgrade configuration

‚ö†Ô∏è  About to: Deploy final configuration
   Details: Will deploy all final LAG and virtual network configuration changes for server 'hpe_evpn_esi_rack_001_sys001' to complete the upgrade
   Do you want to proceed? (y/n): y
‚úÖ Successfully deployed post-upgrade configuration

============================================================
üéâ POST-UPGRADE PHASE COMPLETED SUCCESSFULLY
============================================================
‚ÑπÔ∏è  Server upgrade workflow completed successfully!
‚ÑπÔ∏è  Server is now running on upgraded OS with production network configuration
‚úÖ Script completed successfully!
(base) nitinvig@nitinvig-mbp server_os_upgrade %